:import [Library]

;;; ---------------------------------------------------------------------------
;;; Declarations
:global int slow_down_active

;;; ---------------------------------------------------------------------------
;;; Impulse
game.newround()

;;; ---------------------------------------------------------------------------
;;; Conditions
health(false) > 0.0 && slow_down_active = 0

;;; ---------------------------------------------------------------------------
;;; Macros


;;; ---------------------------------------------------------------------------
;;; Actions
    slow_down_active = 1

WHEN_FULL_SHIELD:
    gotoif(WHEN_FULL_SHIELD, shield(false) == shield.max())

    ; Need to slow down
    {relclick(0.89, 0.97)}

WHEN_MISSING_SHIELD:
    gotoSwitch.2( \
        RESET, hp(false) == 0.0, \
        WHEN_MISSING_SHIELD, shield(false) < shield.max() \
    )

    ; Need to can be fast again
    {relclick(0.89, 0.97)}

    goto(WHEN_FULL_SHIELD)

RESET:
    slow_down_active = 0
END:
