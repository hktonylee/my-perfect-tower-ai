
;;; ---------------------------------------------------------------------------
;;; Definitions
:local int i_layer
:local int i

;;; ---------------------------------------------------------------------------
;;; Impulse
    key.m()

;;; ---------------------------------------------------------------------------
;;; Actions
    gotoif(LAYER_START, gig("Current Mine Tab") == 0)
    tab(gig("Current Mine Tab"))

LAYER_START:
    i = 0

DIG_START:
    dig(i % 4, i / 4)
    i = i + 1
    gotoif(DIG_START, i < 16)

    newlayer()
    i_layer = i_layer + 1
    gotoif(LAYER_START, i_layer < 3)

    ; Increment the tab count
    gis("Current Mine Tab", (gig("Current Mine Tab") % 12) + 1)
