:import [Library]
:import Factory/[CraftMagic]

;;; ---------------------------------------------------------------------------
;;; Definitions
:global int _1 ; tier
; :local int tier

;;; ---------------------------------------------------------------------------
;;; Impulse
key.3()

;;; ---------------------------------------------------------------------------
;;; Macros
#minPlateCount 1000.
#minDustCount 1000.
#maxDensePlateCount 100.

#tier _1

;;; ---------------------------------------------------------------------------
;;; Actions

    gotoif(END, active("presser"))

    {craftMagic.3( \
        "plate.stack", {tier}, \
        {craftLimitMax("plate.stack", {tier}, 100., 1.)}, \
        {craftLimitMax("plate.dense", {tier}, 100., 1.)}, \
        {craftLimitMin("plate", {tier}, 1000., 9.)} \
    )}

    produce("plate.stack", {tier}, count("plate.stack", {tier}), "presser")

END:
